import{r as a,e as y,f as N,j as s,P as v,m as d,ap as m,$ as u,B as P}from"./index-4cb06891.js";import{c as p}from"./customSupabaseClient-9feeeb8f.js";import{L as o}from"./lock-2a8cb0d5.js";import{C as b}from"./check-circle-81b231a2.js";import"./supabase-b91ac978.js";const E=()=>{const[t,x]=a.useState(""),[i,w]=a.useState(""),[c,l]=a.useState(!1),[h,f]=a.useState(!1),{toast:r}=y(),j=N();a.useEffect(()=>{(async()=>{await p.auth.getUser()})()},[]);const g=async e=>{if(e.preventDefault(),t!==i){r({variant:"destructive",title:"Passwords do not match",description:"Please make sure your new password and confirmation match."});return}l(!0);const{error:n}=await p.auth.updateUser({password:t});l(!1),n?r({variant:"destructive",title:"Password Reset Failed",description:n.message}):(f(!0),r({title:"Password Reset Successful! ðŸŽ‰",description:"Your password has been updated. You can now log in with your new password."}),setTimeout(()=>{j("/login")},3e3))};return s.jsxs(s.Fragment,{children:[s.jsx(v,{title:"Reset Password",description:"Set a new password for your Little Space World account."}),s.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)] px-6 sm:px-8 md:px-12",children:s.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:s.jsxs("div",{className:"auth-glass-card",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(o,{className:"mx-auto h-12 w-12 text-pink-400 mb-4"}),s.jsx("h1",{className:"text-3xl font-bold font-['Nunito_Sans'] gradient-text mb-2",children:"Reset Your Password"}),s.jsx("p",{className:"text-gray-300",children:"Enter your new password below."})]}),h?s.jsxs(d.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center p-6 rounded-lg bg-green-500/20 text-green-300",children:[s.jsx(b,{className:"mx-auto h-16 w-16 mb-4"}),s.jsx("p",{className:"text-xl font-semibold",children:"Password reset successfully!"}),s.jsx("p",{className:"mt-2",children:"Redirecting to login..."})]}):s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx(u,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:e=>x(e.target.value),required:!0,className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx(u,{id:"confirm-password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:i,onChange:e=>w(e.target.value),required:!0,className:"pl-10"})]})]}),s.jsx(P,{type:"submit",disabled:c,className:"w-full",variant:"cta",children:c?"Resetting...":"Reset Password"})]})]})})})]})};export{E as default};
