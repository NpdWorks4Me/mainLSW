(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53133,e=>{"use strict";var t=e.i(43476),i=e.i(71645),s=e.i(56902),n=e.i(45172);function r(){let[e,r]=(0,i.useState)("unknown"),[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(null),p=(window?.__STRIPE_PUBLISHABLE__??"pk_live_51ScB5R6gZm7oKhFGHtQfImjsQzgNVR67roJU4VIRSzZsxxGRYAuPmG2wnTy74aUe3AiXdh3Vd9BVnbUviuWySGZw00ZveWPdAt")||"",u=p?.includes("_test_")?"Test":"Live",[m,v]=(0,i.useState)(!1);async function w(){v(!0);try{let e=await fetch("/api/admin/stripe/health"),t=await e.json();t.valid?(r("ok"),o(t.last4||null),c(t.account||null)):r("error")}catch(e){r("error"),console.warn(e)}finally{v(!1)}try{let e=await fetch("/api/admin/settings/provider"),t=await e.json();t&&t.provider&&h(t.provider)}catch(e){}}return(0,i.useEffect)(()=>{w()},[]),(0,t.jsx)("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm text-slate-400",children:["Stripe Status (",d||"unknown",") - ",u," mode"]}),(0,t.jsx)("div",{className:"mt-1 font-semibold text-white",children:"ok"===e?"Connected":"error"===e?"Disconnected":"Checking…"}),a&&(0,t.jsxs)("div",{className:"text-slate-400 mt-1",children:["Card last4: **** **** **** ",a]}),l?.email&&(0,t.jsxs)("div",{className:"text-slate-400 mt-1",children:["Account: ",l.email]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{variant:"ghost",onClick:()=>w(),disabled:m,children:m?"Refreshing…":"Refresh"}),(0,t.jsx)(s.Button,{onClick:()=>{(0,n.toast)({title:"Reconnect",description:"Open Stripe Dashboard in new tab."}),window.open("https://dashboard.stripe.com","_blank")},children:"Reconnect"}),"stripe"!==d&&(0,t.jsx)(s.Button,{variant:"secondary",onClick:async()=>{try{let e=await fetch("/api/admin/settings/provider/set",{method:"POST",body:JSON.stringify({provider:"stripe"}),headers:{"content-type":"application/json"}}),t=await e.json();t?.ok?(h(t.provider),(0,n.toast)({title:"Provider set",description:"Payments provider switched to Stripe."})):(0,n.toast)({title:"Error",description:t?.error||"Unable to switch"})}catch(e){(0,n.toast)({title:"Error",description:"Failed to set provider"})}},children:"Use Stripe"})]})]})})}e.s(["default",()=>r])}]);